shadow$provide[157]=function(r,l,A,p){r=l(73);var k=l(8);l=l(155);class m extends l.AbstractMaskSystem{constructor(d){super(d);this.glConst=k.settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const d=this.maskStack[this.maskStack.length-1];return d?d._stencilCounter:0}push(d){const c=d.maskObject,{gl:a}=this.renderer,b=d._stencilCounter;0===b&&(this.renderer.framebuffer.forceStencil(),a.clearStencil(0),a.clear(a.STENCIL_BUFFER_BIT),a.enable(a.STENCIL_TEST));d._stencilCounter++;
const e=d._colorMask;0!==e&&(d._colorMask=0,a.colorMask(!1,!1,!1,!1));a.stencilFunc(a.EQUAL,b,4294967295);a.stencilOp(a.KEEP,a.KEEP,a.INCR);c.renderable=!0;c.render(this.renderer);this.renderer.batch.flush();c.renderable=!1;0!==e&&(d._colorMask=e,a.colorMask(0!==(e&1),0!==(e&2),0!==(e&4),0!==(e&8)));this._useCurrent()}pop(d){const c=this.renderer.gl;if(0===this.getStackLength())c.disable(c.STENCIL_TEST);else{const a=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,b=a?a._colorMask:
15;0!==b&&(a._colorMask=0,c.colorMask(!1,!1,!1,!1));c.stencilOp(c.KEEP,c.KEEP,c.DECR);d.renderable=!0;d.render(this.renderer);this.renderer.batch.flush();d.renderable=!1;0!==b&&(a._colorMask=b,c.colorMask(0!==(b&1),0!==(b&2),0!==(b&4),0!==(b&8)));this._useCurrent()}}_useCurrent(){const d=this.renderer.gl;d.stencilFunc(d.EQUAL,this.getStackLength(),4294967295);d.stencilOp(d.KEEP,d.KEEP,d.KEEP)}}m.extension={type:r.ExtensionType.RendererSystem,name:"stencil"};r.extensions.add(m);p.StencilSystem=m}
goog.provide("module$node_modules$$pixi$core$lib$mask$StencilSystem");
goog.global. module$node_modules$$pixi$core$lib$mask$StencilSystem=shadow.js.require(157, {});
