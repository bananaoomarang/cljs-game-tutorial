shadow$provide[133]=function(r,l,A,p){var k=l(0);r=l(73);var m=l(8);let d=0;class c{constructor(a){this.renderer=a;this.webGLVersion=1;this.extensions={};this.supports={uint32Indices:!1};this.handleContextLost=this.handleContextLost.bind(this);this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(a){this.gl=a;this.renderer.gl=a;this.renderer.CONTEXT_UID=d++}init(a){if(a.context)this.initFromContext(a.context);else{const b=
1>this.renderer.background.alpha,e=a.premultipliedAlpha;this.preserveDrawingBuffer=a.preserveDrawingBuffer;this.useContextAlpha=a.useContextAlpha;this.powerPreference=a.powerPreference;this.initFromOptions({alpha:b,premultipliedAlpha:e,antialias:a.antialias,stencil:!0,preserveDrawingBuffer:a.preserveDrawingBuffer,powerPreference:a.powerPreference})}}initFromContext(a){this.gl=a;this.validateContext(a);this.renderer.gl=a;this.renderer.CONTEXT_UID=d++;this.renderer.runners.contextChange.emit(a);a=this.renderer.view;
void 0!==a.addEventListener&&(a.addEventListener("webglcontextlost",this.handleContextLost,!1),a.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(a){a=this.createContext(this.renderer.view,a);this.initFromContext(a)}createContext(a,b){let e;if(m.settings.PREFER_ENV>=k.ENV.WEBGL2&&(e=a.getContext("webgl2",b)),e)this.webGLVersion=2;else if(this.webGLVersion=1,e=a.getContext("webgl",b)||a.getContext("experimental-webgl",b),!e)throw Error("This browser does not support WebGL. Try using the canvas renderer");
return this.gl=e,this.getExtensions(),this.gl}getExtensions(){const {gl:a}=this,b={loseContext:a.getExtension("WEBGL_lose_context"),anisotropicFiltering:a.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:a.getExtension("OES_texture_float_linear"),s3tc:a.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:a.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:a.getExtension("WEBGL_compressed_texture_etc"),etc1:a.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:a.getExtension("WEBGL_compressed_texture_pvrtc")||
a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:a.getExtension("WEBGL_compressed_texture_atc"),astc:a.getExtension("WEBGL_compressed_texture_astc"),bptc:a.getExtension("EXT_texture_compression_bptc")};1===this.webGLVersion?Object.assign(this.extensions,b,{drawBuffers:a.getExtension("WEBGL_draw_buffers"),depthTexture:a.getExtension("WEBGL_depth_texture"),vertexArrayObject:a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object"),
uint32ElementIndex:a.getExtension("OES_element_index_uint"),floatTexture:a.getExtension("OES_texture_float"),floatTextureLinear:a.getExtension("OES_texture_float_linear"),textureHalfFloat:a.getExtension("OES_texture_half_float"),textureHalfFloatLinear:a.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,b,{colorBufferFloat:a.getExtension("EXT_color_buffer_float")})}handleContextLost(a){a.preventDefault();setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&
this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const a=this.renderer.view;this.renderer=null;void 0!==a.removeEventListener&&(a.removeEventListener("webglcontextlost",this.handleContextLost),a.removeEventListener("webglcontextrestored",this.handleContextRestored));this.gl.useProgram(null);this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&
this.gl.flush()}validateContext(a){const b=a.getContextAttributes(),e="WebGL2RenderingContext"in globalThis&&a instanceof globalThis.WebGL2RenderingContext;e&&(this.webGLVersion=2);b&&!b.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");a=e||!!a.getExtension("OES_element_index_uint");(this.supports.uint32Indices=a)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}c.defaultOptions=
{context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};c.extension={type:r.ExtensionType.RendererSystem,name:"context"};r.extensions.add(c);p.ContextSystem=c}
goog.provide("module$node_modules$$pixi$core$lib$context$ContextSystem");
goog.global. module$node_modules$$pixi$core$lib$context$ContextSystem=shadow.js.require(133, {});
