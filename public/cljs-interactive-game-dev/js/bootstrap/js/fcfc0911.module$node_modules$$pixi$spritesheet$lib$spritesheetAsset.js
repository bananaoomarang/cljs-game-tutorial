shadow$provide[382]=function(r,l,A,p){function k(b,e,g){const f={};if(b.forEach(h=>{f[h]=e}),Object.keys(e.textures).forEach(h=>{f[`${e.cachePrefix}${h}`]=e.textures[h]}),!g){const h=d.utils.path.dirname(b[0]);e.linkedSheets.forEach((n,q)=>{Object.assign(f,k([`${h}/${e.data.meta.related_multi_packs[q]}`],n,!0))})}return f}var m=l(306),d=l(209),c=l(381);const a=["jpg","png","jpeg","avif","webp"];r={extension:d.ExtensionType.Asset,cache:{test:b=>b instanceof c.Spritesheet,getCacheableAssets:(b,e)=>
k(b,e,!1)},resolver:{test:b=>{var e=b.split("?")[0].split(".");b=e.pop();e=e.pop();return"json"===b&&a.includes(e)},parse:b=>{const e=b.split(".");return{resolution:parseFloat(d.settings.RETINA_PREFIX.exec(b)?.[1]??"1"),format:e[e.length-2],src:b}}},loader:{name:"spritesheetLoader",extension:{type:d.ExtensionType.LoadParser,priority:m.LoaderParserPriority.Normal},async testParse(b,e){return".json"===d.utils.path.extname(e.src).toLowerCase()&&!!b.frames},async parse(b,e,g){const {texture:f,imageFilename:h,
cachePrefix:n}=e?.data??{};let q=d.utils.path.dirname(e.src);q&&q.lastIndexOf("/")!==q.length-1&&(q+="/");if(f&&f.baseTexture)var t=f;else t=m.copySearchParams(q+(h??b.meta.image),e.src),t=(await g.load([t]))[t];const u=new c.Spritesheet({texture:t.baseTexture,data:b,resolutionFilename:e.src,cachePrefix:n});await u.parse();t=b?.meta?.related_multi_packs;if(Array.isArray(t)){b=[];for(const v of t)"string"==typeof v&&(t=q+v,e.data?.ignoreMultiPack||(t=m.copySearchParams(t,e.src),b.push(g.load({src:t,
data:{ignoreMultiPack:!0}}))));e=await Promise.all(b);u.linkedSheets=e;e.forEach(v=>{v.linkedSheets=[u].concat(u.linkedSheets.filter(x=>x!==v))})}return u},unload(b){b.destroy(!0)}}};d.extensions.add(r);p.spritesheetAsset=r}
goog.provide("module$node_modules$$pixi$spritesheet$lib$spritesheetAsset");
goog.global. module$node_modules$$pixi$spritesheet$lib$spritesheetAsset=shadow.js.require(382, {});
