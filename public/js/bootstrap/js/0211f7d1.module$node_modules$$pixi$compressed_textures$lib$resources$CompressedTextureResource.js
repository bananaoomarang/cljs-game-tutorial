shadow$provide[311]=function(r,l,A,p){var k=l(307);r=l(310);class m extends r.BlobResource{constructor(d,c){super(d,c);this.format=c.format;this.levels=c.levels||1;this._width=c.width;this._height=c.height;this._extension=m._formatToExtension(this.format);(c.levelBuffers||this.buffer)&&(this._levelBuffers=c.levelBuffers||m._createLevelBuffers(d instanceof Uint8Array?d:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(d,c,a){c=d.gl;if(!d.context.extensions[this._extension])throw Error(`${this._extension} textures are not supported on the current machine`);
if(!this._levelBuffers)return!1;c.pixelStorei(c.UNPACK_ALIGNMENT,4);for(let b=0,e=this.levels;b<e;b++){const {levelID:g,levelWidth:f,levelHeight:h,levelBuffer:n}=this._levelBuffers[b];c.compressedTexImage2D(c.TEXTURE_2D,g,this.format,f,h,0,n)}return!0}onBlobLoaded(){this._levelBuffers=m._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(d){if(33776<=d&&33779>=d)return"s3tc";if(35916<=d&&35919>=d)return"s3tc_sRGB";if(37488<=d&&37497>=
d)return"etc";if(35840<=d&&35843>=d)return"pvrtc";if(36196===d)return"etc1";if(35986===d||35987===d||34798===d)return"atc";if(36492<=d&&36495>=d)return"bptc";if(37808===d)return"astc";throw Error(`Invalid (compressed) texture format given: ${d}`);}static _createLevelBuffers(d,c,a,b,e,g,f){const h=Array(a);let n=d.byteOffset,q=g+b-1&~(b-1),t=f+e-1&~(e-1),u=q*t*k.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[c];for(let v=0;v<a;v++)h[v]={levelID:v,levelWidth:1<a?g:q,levelHeight:1<a?f:t,levelBuffer:new Uint8Array(d.buffer,
n,u)},n+=u,g=g>>1||1,f=f>>1||1,q=g+b-1&~(b-1),t=f+e-1&~(e-1),u=q*t*k.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[c];return h}}p.CompressedTextureResource=m}
goog.provide("module$node_modules$$pixi$compressed_textures$lib$resources$CompressedTextureResource");
goog.global. module$node_modules$$pixi$compressed_textures$lib$resources$CompressedTextureResource=shadow.js.require(311, {});
