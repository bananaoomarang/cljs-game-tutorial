shadow$provide[206]=function(r,l,A,p){var k=l(186),m=l(136);const d=class extends m.BaseImageResource{constructor(c,a){if(a=a||{},!(c instanceof HTMLVideoElement)){const e=document.createElement("video");!1!==a.autoLoad&&e.setAttribute("preload","auto");!1!==a.playsinline&&(e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""));!0===a.muted&&(e.setAttribute("muted",""),e.muted=!0);!0===a.loop&&e.setAttribute("loop","");!1!==a.autoPlay&&e.setAttribute("autoplay","");"string"==typeof c&&
(c=[c]);m.BaseImageResource.crossOrigin(e,c[0].src||c[0],a.crossorigin);for(let g=0;g<c.length;++g){const f=document.createElement("source");let {src:h,mime:n}=c[g];if(h=h||c[g],h.startsWith("data:"))n=h.slice(5,h.indexOf(";"));else if(!h.startsWith("blob:")){var b=h.split("?").shift().toLowerCase();b=b.slice(b.lastIndexOf(".")+1);n=n||d.MIME_TYPES[b]||`video/${b}`}f.src=h;n&&(f.type=n);e.appendChild(f)}c=e}super(c);this._autoUpdate=this.noSubImage=!0;this._isConnectedToTicker=!1;this._updateFPS=
a.updateFPS||0;this._msToNextUpdate=0;this.autoPlay=!1!==a.autoPlay;this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this);this._reject=this._resolve=this._load=this._videoFrameRequestCallbackHandle=null;this._onCanPlay=this._onCanPlay.bind(this);this._onError=this._onError.bind(this);this._onPlayStart=this._onPlayStart.bind(this);this._onPlayStop=this._onPlayStop.bind(this);this._onSeeked=this._onSeeked.bind(this);!1!==a.autoLoad&&this.load()}update(c){this.destroyed||(this._updateFPS&&
(this._msToNextUpdate=Math.floor(this._msToNextUpdate-k.Ticker.shared.elapsedMS*this.source.playbackRate)),(!this._updateFPS||0>=this._msToNextUpdate)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1E3/this._updateFPS):0))}_videoFrameRequestCallback(){this.update();this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const c=this.source;
return(c.readyState===c.HAVE_ENOUGH_DATA||c.readyState===c.HAVE_FUTURE_DATA)&&c.width&&c.height&&(c.complete=!0),c.addEventListener("play",this._onPlayStart),c.addEventListener("pause",this._onPlayStop),c.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(c.addEventListener("canplay",this._onCanPlay),c.addEventListener("canplaythrough",this._onCanPlay),c.addEventListener("error",this._onError,!0)),this._load=new Promise((a,b)=>{this.valid?a(this):(this._resolve=a,this._reject=
b,c.load())}),this._load}_onError(c){this.source.removeEventListener("error",this._onError,!0);this.onError.emit(c);this._reject&&(this._reject(c),this._reject=null,this._resolve=null)}_isSourcePlaying(){const c=this.source;return!c.paused&&!c.ended}_isSourceReady(){return 2<this.source.readyState}_onPlayStart(){this.valid||this._onCanPlay();this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),
this._msToNextUpdate=0)}_onCanPlay(){const c=this.source;c.removeEventListener("canplay",this._onCanPlay);c.removeEventListener("canplaythrough",this._onCanPlay);const a=this.valid;this._msToNextUpdate=0;this.update();this._msToNextUpdate=0;!a&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null);this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&c.play()}dispose(){this._configureAutoUpdate();const c=this.source;c&&(c.removeEventListener("play",this._onPlayStart),c.removeEventListener("pause",
this._onPlayStop),c.removeEventListener("seeked",this._onSeeked),c.removeEventListener("canplay",this._onCanPlay),c.removeEventListener("canplaythrough",this._onCanPlay),c.removeEventListener("error",this._onError,!0),c.pause(),c.src="",c.load());super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(c){c!==this._autoUpdate&&(this._autoUpdate=c,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(c){c!==this._updateFPS&&(this._updateFPS=c,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&
this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(k.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=
null),this._isConnectedToTicker||(k.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(k.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(c,a){return globalThis.HTMLVideoElement&&c instanceof HTMLVideoElement||
d.TYPES.includes(a)}};r=d;r.TYPES="mp4 m4v webm ogg ogv h264 avi mov".split(" ");r.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};p.VideoResource=r}
goog.provide("module$node_modules$$pixi$core$lib$textures$resources$VideoResource");
goog.global. module$node_modules$$pixi$core$lib$textures$resources$VideoResource=shadow.js.require(206, {});
