shadow$provide[249]=function(r,l,A,p){r=l(209);var k=l(248),m=l(243),d=l(246),c=l(247);const a={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};l=(()=>{const b=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis;this.supportsPointerEvents=!!globalThis.PointerEvent;this.domElement=null;this.resolution=1;this.renderer=e;this.rootBoundary=new k.EventBoundary(null);m.EventsTicker.init(this);this.autoPreventDefault=
!0;this.eventsAdded=!1;this.rootPointerEvent=new d.FederatedPointerEvent(null);this.rootWheelEvent=new c.FederatedWheelEvent(null);this.cursorStyles={default:"inherit",pointer:"pointer"};this.features=new Proxy({...b.defaultEventFeatures},{set:(g,f,h)=>("globalMove"===f&&(this.rootBoundary.enableGlobalMoveEvents=h),g[f]=h,!0)});this.onPointerDown=this.onPointerDown.bind(this);this.onPointerMove=this.onPointerMove.bind(this);this.onPointerUp=this.onPointerUp.bind(this);this.onPointerOverOut=this.onPointerOverOut.bind(this);
this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const {view:g,resolution:f}=this.renderer;this.setTargetElement(g);this.resolution=f;b._defaultEventMode=e.eventMode??"auto";Object.assign(this.features,e.eventFeatures??{});this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null);this.renderer=null}setCursor(e){e=e||"default";let g=!0;if(globalThis.OffscreenCanvas&&
this.domElement instanceof OffscreenCanvas&&(g=!1),this.currentCursor!==e){this.currentCursor=e;var f=this.cursorStyles[e];if(f)switch(typeof f){case "string":g&&(this.domElement.style.cursor=f);break;case "function":f(e);break;case "object":g&&Object.assign(this.domElement.style,f)}else g&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(this.features.click){this.rootBoundary.rootTarget=
this.renderer.lastObjectRendered;var g=this.normalizeToPointerData(e);!this.autoPreventDefault||!g[0].isNormalized||!e.cancelable&&"cancelable"in e||e.preventDefault();for(let f=0,h=g.length;f<h;f++)e=this.bootstrapEvent(this.rootPointerEvent,g[f]),this.rootBoundary.mapEvent(e);this.setCursor(this.rootBoundary.cursor)}}onPointerMove(e){if(this.features.move){this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;m.EventsTicker.pointerMoved();e=this.normalizeToPointerData(e);for(let g=0,f=e.length;g<
f;g++){const h=this.bootstrapEvent(this.rootPointerEvent,e[g]);this.rootBoundary.mapEvent(h)}this.setCursor(this.rootBoundary.cursor)}}onPointerUp(e){if(this.features.click){this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;var g=e.target;e.composedPath&&0<e.composedPath().length&&(g=e.composedPath()[0]);g=g!==this.domElement?"outside":"";e=this.normalizeToPointerData(e);for(let f=0,h=e.length;f<h;f++){const n=this.bootstrapEvent(this.rootPointerEvent,e[f]);n.type+=g;this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}}onPointerOverOut(e){if(this.features.click){this.rootBoundary.rootTarget=
this.renderer.lastObjectRendered;e=this.normalizeToPointerData(e);for(let g=0,f=e.length;g<f;g++){const h=this.bootstrapEvent(this.rootPointerEvent,e[g]);this.rootBoundary.mapEvent(h)}this.setCursor(this.rootBoundary.cursor)}}onWheel(e){this.features.wheel&&(e=this.normalizeWheelEvent(e),this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e))}setTargetElement(e){this.removeEvents();this.domElement=e;m.EventsTicker.domElement=e;this.addEvents()}addEvents(){if(!this.eventsAdded&&
this.domElement){m.EventsTicker.addTickerListener();var e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"));this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",
this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",
this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)));this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0});this.eventsAdded=!0}}removeEvents(){if(this.eventsAdded&&this.domElement){m.EventsTicker.removeTickerListener();var e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=
"");this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",
this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)));this.domElement.removeEventListener("wheel",
this.onWheel,!0);this.domElement=null;this.eventsAdded=!1}}mapPositionToPoint(e,g,f){const h=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},n=1/this.resolution;e.x=this.domElement.width/h.width*(g-h.left)*n;e.y=this.domElement.height/h.height*(f-h.top)*n}normalizeToPointerData(e){const g=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let f=0,h=e.changedTouches.length;f<h;f++){const n=
e.changedTouches[f];"u"<typeof n.button&&(n.button=0);"u"<typeof n.buttons&&(n.buttons=1);"u"<typeof n.isPrimary&&(n.isPrimary=1===e.touches.length&&"touchstart"===e.type);"u"<typeof n.width&&(n.width=n.radiusX||1);"u"<typeof n.height&&(n.height=n.radiusY||1);"u"<typeof n.tiltX&&(n.tiltX=0);"u"<typeof n.tiltY&&(n.tiltY=0);"u"<typeof n.pointerType&&(n.pointerType="touch");"u"<typeof n.pointerId&&(n.pointerId=n.identifier||0);"u"<typeof n.pressure&&(n.pressure=n.force||.5);"u"<typeof n.twist&&(n.twist=
0);"u"<typeof n.tangentialPressure&&(n.tangentialPressure=0);"u"<typeof n.layerX&&(n.layerX=n.offsetX=n.clientX);"u"<typeof n.layerY&&(n.layerY=n.offsetY=n.clientY);n.isNormalized=!0;n.type=e.type;g.push(n)}else{if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent))"u"<typeof e.isPrimary&&(e.isPrimary=!0),"u"<typeof e.width&&(e.width=1),"u"<typeof e.height&&(e.height=1),"u"<typeof e.tiltX&&(e.tiltX=0),"u"<typeof e.tiltY&&(e.tiltY=0),
"u"<typeof e.pointerType&&(e.pointerType="mouse"),"u"<typeof e.pointerId&&(e.pointerId=1),"u"<typeof e.pressure&&(e.pressure=.5),"u"<typeof e.twist&&(e.twist=0),"u"<typeof e.tangentialPressure&&(e.tangentialPressure=0),e.isNormalized=!0;g.push(e)}return g}normalizeWheelEvent(e){const g=this.rootWheelEvent;return this.transferMouseData(g,e),g.deltaX=e.deltaX,g.deltaY=e.deltaY,g.deltaZ=e.deltaZ,g.deltaMode=e.deltaMode,this.mapPositionToPoint(g.screen,e.clientX,e.clientY),g.global.copyFrom(g.screen),
g.offset.copyFrom(g.screen),g.nativeEvent=e,g.type=e.type,g}bootstrapEvent(e,g){return e.originalEvent=null,e.nativeEvent=g,e.pointerId=g.pointerId,e.width=g.width,e.height=g.height,e.isPrimary=g.isPrimary,e.pointerType=g.pointerType,e.pressure=g.pressure,e.tangentialPressure=g.tangentialPressure,e.tiltX=g.tiltX,e.tiltY=g.tiltY,e.twist=g.twist,this.transferMouseData(e,g),this.mapPositionToPoint(e.screen,g.clientX,g.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=g.isTrusted,
"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=a[e.type]||e.type),e}transferMouseData(e,g){e.isTrusted=g.isTrusted;e.srcElement=g.srcElement;e.timeStamp=performance.now();e.type=g.type;e.altKey=g.altKey;e.button=g.button;e.buttons=g.buttons;e.client.x=g.clientX;e.client.y=g.clientY;e.ctrlKey=g.ctrlKey;e.metaKey=g.metaKey;e.movement.x=g.movementX;e.movement.y=g.movementY;e.page.x=g.pageX;e.page.y=
g.pageY;e.relatedTarget=null;e.shiftKey=g.shiftKey}};return b})();l.extension={name:"events",type:[r.ExtensionType.RendererSystem,r.ExtensionType.CanvasRendererSystem]};l.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};r.extensions.add(l);p.EventSystem=l}
goog.provide("module$node_modules$$pixi$events$lib$EventSystem");
goog.global. module$node_modules$$pixi$events$lib$EventSystem=shadow.js.require(249, {});
