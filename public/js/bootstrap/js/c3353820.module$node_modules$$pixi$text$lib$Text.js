shadow$provide[363]=function(r,l,A,p){var k=l(209),m=l(216),d=l(360),c=l(361),a=l(362);const b={texture:!0,children:!1,baseTexture:!0};r=(()=>{const e=class extends m.Sprite{constructor(g,f,h){let n=!1;h||(h=k.settings.ADAPTER.createCanvas(),n=!0);h.width=3;h.height=3;const q=k.Texture.from(h);q.orig=new k.Rectangle;q.trim=new k.Rectangle;super(q);this._ownCanvas=n;this.canvas=h;this.context=h.getContext("2d",{willReadFrequently:!0});this._resolution=e.defaultResolution??k.settings.RESOLUTION;this._autoResolution=
e.defaultAutoResolution;this._styleListener=this._style=this._text=null;this._font="";this.text=g;this.style=f;this.localStyleID=-1}static get experimentalLetterSpacing(){return c.TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(g){k.utils.deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing");c.TextMetrics.experimentalLetterSpacing=g}updateText(g){const f=this._style;if(this.localStyleID!==f.styleID&&(this.dirty=!0,
this.localStyleID=f.styleID),this.dirty||!g){this._font=this._style.toFontString();g=this.context;var h=c.TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=h.height,q=h.lines,t=h.lineHeight,u=h.lineWidths,v=h.maxLineWidth,x=h.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,h.width)+2*f.padding)*this._resolution);this.canvas.height=Math.ceil(Math.ceil(Math.max(1,n)+2*f.padding)*this._resolution);g.scale(this._resolution,this._resolution);g.clearRect(0,
0,this.canvas.width,this.canvas.height);g.font=this._font;g.lineWidth=f.strokeThickness;g.textBaseline=f.textBaseline;g.lineJoin=f.lineJoin;g.miterLimit=f.miterLimit;var z,y=f.dropShadow?2:1;for(let w=0;w<y;++w){const E=(z=f.dropShadow&&0===w)?Math.ceil(Math.max(1,n)+2*f.padding):0;var C=E*this._resolution;if(z){g.fillStyle="black";g.strokeStyle="black";z=f.dropShadowBlur*this._resolution;var B=f.dropShadowDistance*this._resolution;g.shadowColor=k.Color.shared.setValue(f.dropShadowColor).setAlpha(f.dropShadowAlpha).toRgbaString();
g.shadowBlur=z;g.shadowOffsetX=Math.cos(f.dropShadowAngle)*B;g.shadowOffsetY=Math.sin(f.dropShadowAngle)*B+C}else g.fillStyle=this._generateFillStyle(f,q,h),g.strokeStyle=f.stroke,g.shadowColor="black",g.shadowBlur=0,g.shadowOffsetX=0,g.shadowOffsetY=0;B=(t-x.fontSize)/2;0>t-x.fontSize&&(B=0);for(let H=0;H<q.length;H++)C=f.strokeThickness/2,z=f.strokeThickness/2+H*t+x.ascent+B,"right"===f.align?C+=v-u[H]:"center"===f.align&&(C+=(v-u[H])/2),f.stroke&&f.strokeThickness&&this.drawLetterSpacing(q[H],
C+f.padding,z+f.padding-E,!0),f.fill&&this.drawLetterSpacing(q[H],C+f.padding,z+f.padding-E)}this.updateTexture()}}drawLetterSpacing(g,f,h,n=!1){const q=this._style.letterSpacing;var t=!1;if(c.TextMetrics.experimentalLetterSpacingSupported&&(c.TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${q}px`,this.context.textLetterSpacing=`${q}px`,t=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===q||t)n?this.context.strokeText(g,f,h):this.context.fillText(g,
f,h);else{t=c.TextMetrics.graphemeSegmenter(g);g=this.context.measureText(g).width;for(let v=0;v<t.length;++v){var u=t[v];n?this.context.strokeText(u,f,h):this.context.fillText(u,f,h);u="";for(let x=v+1;x<t.length;++x)u+=t[x];u=this.context.measureText(u).width;f+=g-u+q;g=u}}}updateTexture(){const g=this.canvas;if(this._style.trim){var f=k.utils.trimCanvas(g);f.data&&(g.width=f.width,g.height=f.height,this.context.putImageData(f.data,0,0))}f=this._texture;var h=this._style;h=h.trim?0:h.padding;const n=
f.baseTexture;f.trim.width=f._frame.width=g.width/this._resolution;f.trim.height=f._frame.height=g.height/this._resolution;f.trim.x=-h;f.trim.y=-h;f.orig.width=f._frame.width-2*h;f.orig.height=f._frame.height-2*h;this._onTextureUpdate();n.setRealSize(g.width,g.height,this._resolution);f.updateUvs();this.dirty=!1}_render(g){this._autoResolution&&this._resolution!==g.resolution&&(this._resolution=g.resolution,this.dirty=!0);this.updateText(!0);super._render(g)}updateTransform(){this.updateText(!0);
super.updateTransform()}getBounds(g,f){return this.updateText(!0),-1===this._textureID&&(g=!1),super.getBounds(g,f)}getLocalBounds(g){return this.updateText(!0),super.getLocalBounds.call(this,g)}_calculateBounds(){this.calculateVertices();this._bounds.addQuad(this.vertexData)}_generateFillStyle(g,f,h){var n=g.fill;if(Array.isArray(n)){if(1===n.length)return n[0]}else return n;var q=g.dropShadow?g.dropShadowDistance:0,t=g.padding||0,u=this.canvas.width/this._resolution-q-2*t,v=this.canvas.height/this._resolution-
q-2*t;q=n.slice();const x=g.fillGradientStops.slice();if(!x.length){var z=q.length+1;for(var y=1;y<z;++y)x.push(y/z)}if(q.unshift(n[0]),x.unshift(0),q.push(n[n.length-1]),x.push(1),g.fillGradientType===d.TEXT_GRADIENT.LINEAR_VERTICAL){n=this.context.createLinearGradient(u/2,t,u/2,v+t);var C=h.fontProperties.fontSize+g.strokeThickness;for(g=0;g<f.length;g++)for(u=h.lineHeight*(g-1)+C,t=z=h.lineHeight*g,0<g&&u>z&&(t=(z+u)/2),u=z+C,z=h.lineHeight*(g+1),y=u,g+1<f.length&&z<u&&(y=(u+z)/2),u=(y-t)/v,z=
0;z<q.length;z++)y=0,"number"==typeof x[z]?y=x[z]:y=z/q.length,y=Math.min(1,Math.max(0,t/v+y*u)),y=Number(y.toFixed(5)),n.addColorStop(y,q[z])}else for(n=this.context.createLinearGradient(t,v/2,u+t,v/2),f=q.length+1,h=1,v=0;v<q.length;v++)"number"==typeof x[v]?C=x[v]:C=h/f,n.addColorStop(C,q[v]),h++;return n}destroy(g){"boolean"==typeof g&&(g={children:g});g=Object.assign({},b,g);super.destroy(g);this._ownCanvas&&(this.canvas.height=this.canvas.width=0);this._style=this.canvas=this.context=null}get width(){return this.updateText(!0),
Math.abs(this.scale.x)*this._texture.orig.width}set width(g){this.updateText(!0);const f=k.utils.sign(this.scale.x)||1;this.scale.x=f*g/this._texture.orig.width;this._width=g}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(g){this.updateText(!0);const f=k.utils.sign(this.scale.y)||1;this.scale.y=f*g/this._texture.orig.height;this._height=g}get style(){return this._style}set style(g){g=g||{};g instanceof a.TextStyle?this._style=g:this._style=new a.TextStyle(g);
this.localStyleID=-1;this.dirty=!0}get text(){return this._text}set text(g){g=String(g??"");this._text!==g&&(this._text=g,this.dirty=!0)}get resolution(){return this._resolution}set resolution(g){this._autoResolution=!1;this._resolution!==g&&(this._resolution=g,this.dirty=!0)}};return e})();r.defaultAutoResolution=!0;p.Text=r}
goog.provide("module$node_modules$$pixi$text$lib$Text");
goog.global. module$node_modules$$pixi$text$lib$Text=shadow.js.require(363, {});
