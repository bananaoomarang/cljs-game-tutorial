shadow$provide[361]=function(r,l,A,p){var k=l(209);const m={willReadFrequently:!0};r=(()=>{const d=class{static get experimentalLetterSpacingSupported(){var c=d._experimentalLetterSpacingSupported;void 0!==c&&(c=k.settings.ADAPTER.getCanvasRenderingContext2D().prototype,c=d._experimentalLetterSpacingSupported="letterSpacing"in c||"textLetterSpacing"in c);return c}constructor(c,a,b,e,g,f,h,n,q){this.text=c;this.style=a;this.width=b;this.height=e;this.lines=g;this.lineWidths=f;this.lineHeight=h;this.maxLineWidth=
n;this.fontProperties=q}static measureText(c,a,b,e=d._canvas){b=b??a.wordWrap;var g=a.toFontString();const f=d.measureFont(g);0===f.fontSize&&(f.fontSize=a.fontSize,f.ascent=a.fontSize);var h=e.getContext("2d",m);h.font=g;b=(b?d.wordWrap(c,a,e):c).split(/(?:\r\n|\r|\n)/);e=Array(b.length);g=0;for(var n=0;n<b.length;n++){var q=d._measureText(b[n],a.letterSpacing,h);e[n]=q;g=Math.max(g,q)}h=g+a.strokeThickness;a.dropShadow&&(h+=a.dropShadowDistance);n=a.lineHeight||f.fontSize+a.strokeThickness;q=Math.max(n,
f.fontSize+2*a.strokeThickness)+a.leading+(b.length-1)*(n+a.leading);return a.dropShadow&&(q+=a.dropShadowDistance),new d(c,a,h,q,b,e,n+a.leading,g,f)}static _measureText(c,a,b){let e=!1;d.experimentalLetterSpacingSupported&&(d.experimentalLetterSpacing?(b.letterSpacing=`${a}px`,b.textLetterSpacing=`${a}px`,e=!0):(b.letterSpacing="0px",b.textLetterSpacing="0px"));b=b.measureText(c).width;return 0<b&&(e?b-=a:b+=(d.graphemeSegmenter(c).length-1)*a),b}static wordWrap(c,a,b=d._canvas){b=b.getContext("2d",
m);let e=0,g="",f="";const h=Object.create(null),{letterSpacing:n,whiteSpace:q}=a,t=d.collapseSpaces(q),u=d.collapseNewlines(q);let v=!t;const x=a.wordWrapWidth+n;c=d.tokenize(c);for(let B=0;B<c.length;B++){let w=c[B];if(d.isNewline(w)){if(!u){f+=d.addLine(g);v=!t;g="";e=0;continue}w=" "}if(t){var z=d.isBreakingSpace(w),y=d.isBreakingSpace(g[g.length-1]);if(z&&y)continue}z=d.getFromCache(w,n,h,b);if(z>x)if(""!==g&&(f+=d.addLine(g),g="",e=0),d.canBreakWords(w,a.breakWords))for(z=d.wordWrapSplit(w),
y=0;y<z.length;y++){let E=z[y];var C=E;let H=1;for(;z[y+H];){const I=z[y+H];if(d.canBreakChars(C,I,w,y,a.breakWords))break;else E+=I;C=I;H++}y+=H-1;C=d.getFromCache(E,n,h,b);C+e>x&&(f+=d.addLine(g),v=!1,g="",e=0);g+=E;e+=C}else 0<g.length&&(f+=d.addLine(g)),f+=d.addLine(w,B!==c.length-1),v=!1,g="",e=0;else z+e>x&&(v=!1,f+=d.addLine(g),g="",e=0),(0<g.length||!d.isBreakingSpace(w)||v)&&(g+=w,e+=z)}return f+=d.addLine(g,!1),f}static addLine(c,a=!0){return c=d.trimRight(c),c=a?`${c}
`:c,c}static getFromCache(c,a,b,e){let g=b[c];return"number"!=typeof g&&(g=d._measureText(c,a,e)+a,b[c]=g),g}static collapseSpaces(c){return"normal"===c||"pre-line"===c}static collapseNewlines(c){return"normal"===c}static trimRight(c){if("string"!=typeof c)return"";for(let a=c.length-1;0<=a&&d.isBreakingSpace(c[a]);a--)c=c.slice(0,-1);return c}static isNewline(c){return"string"!=typeof c?!1:d._newlines.includes(c.charCodeAt(0))}static isBreakingSpace(c,a){return"string"!=typeof c?!1:d._breakingSpaces.includes(c.charCodeAt(0))}static tokenize(c){const a=
[];let b="";if("string"!=typeof c)return a;for(let e=0;e<c.length;e++){const g=c[e];d.isBreakingSpace(g,c[e+1])||d.isNewline(g)?(""!==b&&(a.push(b),b=""),a.push(g)):b+=g}return""!==b&&a.push(b),a}static canBreakWords(c,a){return a}static canBreakChars(c,a,b,e,g){return!0}static wordWrapSplit(c){return d.graphemeSegmenter(c)}static measureFont(c){if(d._fonts[c])return d._fonts[c];const a={ascent:0,descent:0,fontSize:0};var b=d._canvas,e=d._context;e.font=c;var g=d.METRICS_STRING+d.BASELINE_SYMBOL,
f=Math.ceil(e.measureText(g).width);let h=Math.ceil(e.measureText(d.BASELINE_SYMBOL).width);var n=Math.ceil(d.HEIGHT_MULTIPLIER*h);if(h=h*d.BASELINE_MULTIPLIER|0,0===f||0===n)return d._fonts[c]=a,a;b.width=f;b.height=n;e.fillStyle="#f00";e.fillRect(0,0,f,n);e.font=c;e.textBaseline="alphabetic";e.fillStyle="#000";e.fillText(g,0,h);b=e.getImageData(0,0,f,n).data;e=b.length;f*=4;let q=0,t=!1;for(g=0;g<h;++g){for(let u=0;u<f;u+=4)if(255!==b[q+u]){t=!0;break}if(t)break;else q+=f}a.ascent=h-g;q=e-f;t=!1;
for(g=n;g>h;--g){for(n=0;n<f;n+=4)if(255!==b[q+n]){t=!0;break}if(t)break;else q-=f}return a.descent=g-h,a.fontSize=a.ascent+a.descent,d._fonts[c]=a,a}static clearMetrics(c=""){c?delete d._fonts[c]:d._fonts={}}static get _canvas(){if(!d.__canvas){let c;try{const a=new OffscreenCanvas(0,0);if(a.getContext("2d",m)?.measureText)return d.__canvas=a,a;c=k.settings.ADAPTER.createCanvas()}catch{c=k.settings.ADAPTER.createCanvas()}c.width=c.height=10;d.__canvas=c}return d.__canvas}static get _context(){return d.__context||
(d.__context=d._canvas.getContext("2d",m)),d.__context}};return d})();r.METRICS_STRING="|ÉqÅ";r.BASELINE_SYMBOL="M";r.BASELINE_MULTIPLIER=1.4;r.HEIGHT_MULTIPLIER=2;r.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const d=new Intl.Segmenter;return c=>[...d.segment(c)].map(a=>a.segment)}return d=>[...d]})();r.experimentalLetterSpacing=!1;r._fonts={};r._newlines=[10,13];r._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];p.TextMetrics=r}
goog.provide("module$node_modules$$pixi$text$lib$TextMetrics");
goog.global. module$node_modules$$pixi$text$lib$TextMetrics=shadow.js.require(361, {});
