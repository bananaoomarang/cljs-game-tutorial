shadow$provide[331]=function(r,l,A,p){function k(a,b,e,g,f,h,n,q){let t,u;n?(t=g,u=-e):(t=-g,u=e);return q.push(a-e*f+t,b-g*f+u,a+e*h+t,b+g*h+u),2}function m(a,b,e,g,f,h,n,q){var t=e-a,u=g-b,v=Math.atan2(t,u);let x=Math.atan2(f-a,h-b);q&&v<x?v+=2*Math.PI:!q&&v>x&&(x+=2*Math.PI);let z=v;v=x-v;t=Math.sqrt(t*t+u*u);u=(15*Math.abs(v)*Math.sqrt(t)/Math.PI>>0)+1;v/=u;if(z+=v,q){n.push(a,b,e,g);for(let y=1,C=z;y<u;y++,C+=v)n.push(a,b,a+Math.sin(C)*t,b+Math.cos(C)*t);n.push(a,b,f,h)}else{n.push(e,g,a,b);
for(let y=1,C=z;y<u;y++,C+=v)n.push(a+Math.sin(C)*t,b+Math.cos(C)*t,a,b);n.push(f,h,a,b)}return 2*u}var d=l(209),c=l(327);p.buildLine=function(a,b){if(a.lineStyle.native){var e,g=a.shape,f=a.points||g.points;g=g.type!==d.SHAPES.POLY||g.closeStroke;if(0!==f.length){a=b.points;b=b.indices;var h=f.length/2,n=a.length/2,q=n;a.push(f[0],f[1]);for(e=1;e<h;e++)a.push(f[2*e],f[2*e+1]),b.push(q,q+1),q++;g&&b.push(q,n)}}else if(g=a.shape,f=a.points||g.points.slice(),q=b.closePointEps,0!==f.length){a=a.lineStyle;
h=new d.Point(f[0],f[1]);n=new d.Point(f[f.length-2],f[f.length-1]);g=g.type!==d.SHAPES.POLY||g.closeStroke;q=Math.abs(h.x-n.x)<q&&Math.abs(h.y-n.y)<q;g&&(f=f.slice(),q&&(f.pop(),f.pop(),n.set(f[f.length-2],f[f.length-1])),q=.5*(h.x+n.x),h=.5*(n.y+h.y),f.unshift(q,h),f.push(q,h));h=b.points;var t=f.length/2;n=f.length;q=h.length/2;var u=a.width/2,v=u*u,x=a.miterLimit*a.miterLimit,z=f[0],y=f[1];e=f[2];var C=f[3],B=-(y-C),w=z-e,E=Math.sqrt(B*B+w*w);B=B/E*u;w=w/E*u;e=a.alignment;var H=2*(1-e),I=2*e;
g||(a.cap===c.LINE_CAP.ROUND?n+=m(z-B*(H-I)*.5,y-w*(H-I)*.5,z-B*H,y-w*H,z+B*I,y+w*I,h,!0)+2:a.cap===c.LINE_CAP.SQUARE&&(n+=k(z,y,B,w,H,I,!0,h)));h.push(z-B*H,y-w*H,z+B*I,y+w*I);for(let R=1;R<t-1;++R){z=f[2*(R-1)];y=f[2*(R-1)+1];e=f[2*R];C=f[2*R+1];var M=f[2*(R+1)];var N=f[2*(R+1)+1];B=-(y-C);w=z-e;E=Math.sqrt(B*B+w*w);B/=E;w/=E;B*=u;w*=u;var G=-(C-N);var K=e-M;E=Math.sqrt(G*G+K*K);G/=E;K/=E;G*=u;K*=u;var D=e-z,F=y-C;const O=e-M,S=N-C;var J=D*O+F*S,L=F*O-S*D;E=0>L;if(Math.abs(L)<.001*Math.abs(J))h.push(e-
B*H,C-w*H,e+B*I,C+w*I),0<=J&&(a.join===c.LINE_JOIN.ROUND?n+=m(e,C,e-B*H,C-w*H,e-G*H,C-K*H,h,!1)+4:n+=2,h.push(e-G*I,C-K*I,e+G*H,C+K*H));else if(z=(-B+z)*(-w+C)-(-B+e)*(-w+y),y=(-G+M)*(-K+C)-(-G+e)*(-K+N),N=(D*y-O*z)/L,L=(S*z-F*y)/L,z=(N-e)*(N-e)+(L-C)*(L-C),y=e+(N-e)*H,M=C+(L-C)*H,N=e-(N-e)*I,L=C-(L-C)*I,J=E?H:I,D=z<=Math.min(D*D+F*F,O*O+S*S)+J*J*v,F=a.join,F===c.LINE_JOIN.MITER&&z/v>x&&(F=c.LINE_JOIN.BEVEL),D)switch(F){case c.LINE_JOIN.MITER:h.push(y,M,N,L);break;case c.LINE_JOIN.BEVEL:E?h.push(y,
M,e+B*I,C+w*I,y,M,e+G*I,C+K*I):h.push(e-B*H,C-w*H,N,L,e-G*H,C-K*H,N,L);n+=2;break;case c.LINE_JOIN.ROUND:E?(h.push(y,M,e+B*I,C+w*I),n+=m(e,C,e+B*I,C+w*I,e+G*I,C+K*I,h,!0)+4,h.push(y,M,e+G*I,C+K*I)):(h.push(e-B*H,C-w*H,N,L),n+=m(e,C,e-B*H,C-w*H,e-G*H,C-K*H,h,!1)+4,h.push(e-G*H,C-K*H,N,L))}else{switch(h.push(e-B*H,C-w*H,e+B*I,C+w*I),F){case c.LINE_JOIN.MITER:E?h.push(N,L,N,L):h.push(y,M,y,M);n+=2;break;case c.LINE_JOIN.ROUND:E?n+=m(e,C,e+B*I,C+w*I,e+G*I,C+K*I,h,!0)+2:n+=m(e,C,e-B*H,C-w*H,e-G*H,C-K*
H,h,!1)+2}h.push(e-G*H,C-K*H,e+G*I,C+K*I);n+=2}}z=f[2*(t-2)];y=f[2*(t-2)+1];e=f[2*(t-1)];C=f[2*(t-1)+1];B=-(y-C);w=z-e;E=Math.sqrt(B*B+w*w);B=B/E*u;w=w/E*u;h.push(e-B*H,C-w*H,e+B*I,C+w*I);g||(a.cap===c.LINE_CAP.ROUND?n+=m(e-B*(H-I)*.5,C-w*(H-I)*.5,e-B*H,C-w*H,e+B*I,C+w*I,h,!1)+2:a.cap===c.LINE_CAP.SQUARE&&(n+=k(e,C,B,w,H,I,!1,h)));b=b.indices;f=c.curves.epsilon*c.curves.epsilon;for(a=q;a<n+q-2;++a)z=h[2*a],y=h[2*a+1],e=h[2*(a+1)],C=h[2*(a+1)+1],M=h[2*(a+2)],N=h[2*(a+2)+1],Math.abs(z*(C-N)+e*(N-y)+
M*(y-C))<f||b.push(a,a+1,a+2)}}}
goog.provide("module$node_modules$$pixi$graphics$lib$utils$buildLine");
goog.global. module$node_modules$$pixi$graphics$lib$utils$buildLine=shadow.js.require(331, {});
