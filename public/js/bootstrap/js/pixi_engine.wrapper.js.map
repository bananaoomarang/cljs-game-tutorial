{"version":3,"sources":["pixi_engine/wrapper.cljs"],"mappings":"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","names":["pixi-engine.wrapper/vec2","x","y","pixi-engine.wrapper/vec-x","v","pixi-engine.wrapper/vec-y","var_args","G__11734","pixi-engine.wrapper/set-vec2","js/Error","xy","pixi_engine.wrapper.set_vec2","cljs.core.assoc","pixi-engine.wrapper/vec2*","n","pixi-engine.wrapper/vec2-add","v1","v2","pixi-engine.wrapper/get-app-element","selector","js/document","pixi-engine.wrapper/create-on-keydown","on-keydown","e","pixi-engine.wrapper/create-on-keyup","on-keyup","pixi-engine.wrapper/key-subscribe!","js/window","pixi-engine.wrapper/load-sprites!","app","sprites","seq__11735","cljs.core/seq","chunk__11736","count__11737","i__11738","vec__11745","cljs.core.nth","temp__5804__auto__","cljs.core/chunked-seq?","c__5525__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","vec__11748","cljs.core/first","cljs.core/next","key","val","pixi-engine.core/Assets","cljs.core/clj->js","cljs.core/name","cljs.core/keys","pixi-engine.wrapper/create-sprite","resource-key","opts","pixi-engine.core/create-sprite","pixi-engine.wrapper/add-sprite!","sprite","pixi-engine.core/add-child!","pixi-engine.wrapper/remove-sprite!","pixi-engine.core/remove-child!","pixi-engine.wrapper/create-rectangle","pixi-engine.core/create-rectangle","p__11751","map__11752","cljs.core/--destructure-map","cljs.core.get","pixi-engine.wrapper/init!","el-selector","width","height","setup","update","cljs.core.println","pixi-engine.core/create-application","cljs.core.partial"],"sourcesContent":["(ns pixi-engine.wrapper\n  (:require\n   [pixi-engine.core :as pixi]))\n\n(defn vec2 [x y]\n  {:x x :y y})\n\n(defn vec-x [v]\n  (:x v))\n\n(defn vec-y [v]\n  (:y v))\n\n(defn set-vec2\n  ([v xy]\n   (set-vec2 v xy xy))\n\n  ([v x y]\n   (assoc v :x x :y y)))\n\n(defn vec2*\n  [v n]\n  (assoc v :x (* n (:x v)) :y (* n (:y v))))\n\n(defn vec2-add\n  [v1 v2]\n  (assoc v1 :x (+ (:x v1) (:x v2)) :y (+ (:y v1) (:y v2))))\n\n(defn get-app-element [selector]\n  (. js/document querySelector selector))\n\n(defn create-on-keydown [on-keydown]\n  (fn [e]\n    ;; (. e preventDefault)\n\n    (on-keydown e)))\n\n(defn create-on-keyup [on-keyup]\n  (fn [e]\n    ;; (. e preventDefault)\n\n    (on-keyup e)))\n\n(defn key-subscribe! [on-keydown on-keyup]\n  (when on-keydown\n    (. js/window addEventListener \"keydown\" (create-on-keydown on-keydown) false))\n\n  (when on-keyup\n    (. js/window addEventListener \"keyup\" (create-on-keyup on-keyup) false)))\n\n(defn load-sprites! [app sprites]\n  (doseq [[key val] sprites]\n    (. pixi/Assets add (clj->js {:alias (name key) :src val})))\n  \n  (. pixi/Assets load (clj->js (keys sprites))))\n\n(defn create-sprite [app resource-key opts]\n  (pixi/create-sprite app resource-key opts))\n\n(defn add-sprite! [app sprite]\n  (pixi/add-child! (.-stage app) sprite))\n\n(defn remove-sprite! [app sprite]\n  (pixi/remove-child! (.-stage app) sprite))\n\n(def create-rectangle pixi/create-rectangle)\n\n(defn init!\n  \"Init stuff\"\n\n  [el-selector {:keys [width height sprites setup update on-keydown on-keyup]}]\n  (println \"running init...\")\n\n  (let [app (pixi/create-application {:width width :height height})]\n    (. (get-app-element el-selector) appendChild (.-view app))\n\n    (-> (load-sprites! app sprites)\n        (.then\n         (fn []\n           (key-subscribe! on-keydown on-keyup)\n           (setup app)\n           (. (.-ticker app) add (partial update app)))))))\n"]}